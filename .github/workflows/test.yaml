name: Log latest release v1
"on":
  push:

    

jobs:
  job1:
    runs-on: ubuntu-latest
    outputs:
      rules: ${{ steps.set-matrix.outputs.rules }}
    steps:
    - name: Checkout harness repo
      uses: actions/checkout@v2
      with:
         path: yellow-team-repo
    - id: set-matrix
      name: get folder name
      shell: bash
      run: |
         DIR=yellow-team-repo
         ls ${DIR}/pipelines | jq -csR '. | rtrimstr("\n") | split("\n")' > rules.list
         cat rules.list
         echo "::set-output name=rules::$(cat rules.list)"
    - run: echo ${{ steps.set-matrix.outputs.rules }}
  job2:
    runs-on: ubuntu-latest
    needs: job1
    strategy:
      matrix: 
        rule: ${{ fromJson(needs.job1.outputs.rules) }}
    steps:
      - uses: actions/checkout@v2

      - name: test
        run: echo ${{ matrix.rule }}
    
